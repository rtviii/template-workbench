<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Molstar Alignment - Dev</title>
    <style>
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }
      body {
        font-family: system-ui, sans-serif;
        display: flex;
        height: 100vh;
      }
      #controls {
        width: 320px;
        padding: 16px;
        background: #f5f5f5;
        border-right: 1px solid #ddd;
        overflow-y: auto;
      }
      #viewer-container {
        flex: 1;
      }
      h3 {
        margin: 16px 0 8px;
        font-size: 13px;
      }
      h3:first-child {
        margin-top: 0;
      }
      input[type="text"],
      input[type="number"],
      button {
        padding: 8px;
        font-size: 13px;
        border: 1px solid #ccc;
        border-radius: 4px;
      }
      input[type="text"],
      input[type="number"] {
        width: 100%;
        margin-bottom: 8px;
      }
      button {
        width: 100%;
        cursor: pointer;
        background: #2563eb;
        color: white;
        border: none;
      }
      button:hover {
        background: #1d4ed8;
      }
      #log {
        margin-top: 16px;
        padding: 8px;
        background: #1e1e1e;
        color: #0f0;
        font-family: monospace;
        font-size: 11px;
        height: 150px;
        overflow-y: auto;
        border-radius: 4px;
      }
      #loaded-items {
        margin-top: 8px;
      }
      

      .item {
        padding: 8px;
        background: white;
        border: 1px solid #ddd;
        border-radius: 4px;
        margin-bottom: 6px;
        font-size: 12px;
        position: relative;
      }
      .item-header {
        display: flex;
        align-items: center;
        gap: 6px;
      }
      .item-label {
        flex: 1;
        font-weight: 500;
      }
      .vis-btn,
      .del-btn {
        width: auto;
        padding: 4px 8px;
        font-size: 11px;
      }
      .del-btn {
        background: #dc2626;
      }

      .color-swatch-btn {
        width: 24px;
        height: 24px;
        padding: 0;
        border: 2px solid #ccc;
        border-radius: 4px;
        cursor: pointer;
      }
      .color-swatch-btn:hover {
        border-color: #666;
      }

      .color-palette {
        position: absolute;
        top: 100%;
        left: 40px;
        z-index: 100;
        background: white;
        border: 1px solid #ddd;
        border-radius: 6px;
        padding: 8px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        display: none;
      }
      .color-palette.open {
        display: block;
      }

      .palette-grid {
        display: grid;
        grid-template-columns: repeat(6, 1fr);
        gap: 4px;
        width: 180px;
      }

      .palette-swatch {
        width: 24px;
        height: 24px;
        border: 1px solid rgba(0, 0, 0, 0.1);
        border-radius: 3px;
        cursor: pointer;
        transition: transform 0.1s;
      }
      .palette-swatch:hover {
        transform: scale(1.15);
        border-color: #333;
      }
      .palette-swatch.selected {
        border: 2px solid #000;
      }

      .iso-controls {
        display: flex;
        align-items: center;
        gap: 8px;
        margin-top: 6px;
        padding-top: 6px;
        border-top: 1px solid #eee;
      }
      .iso-slider {
        flex: 1;
        height: 4px;
        cursor: pointer;
      }
      .iso-value {
        font-family: monospace;
        font-size: 11px;
        min-width: 50px;
      }
      .iso-abs {
        font-family: monospace;
        font-size: 10px;
        color: #666;
      }
    </style>
  </head>
  <body>
    <div id="controls">
      <h3>Load Structure</h3>
      <input
        type="text"
        id="pdb-input"
        placeholder="PDB ID (e.g. 3J7Z)"
        value="3J7Z"
      />
      <button id="load-structure-btn">Load Structure</button>

      <h3>Load Map</h3>
      <input type="text" id="emdb-input" placeholder="EMDB ID (e.g. 6057)" />
      <input
        type="number"
        id="iso-input"
        placeholder="Iso value"
        value="1.5"
        step="0.1"
      />
      <button id="load-map-btn">Load Map</button>

      <h3>Loaded Items</h3>
      <div id="loaded-items"></div>
      <button id="clear-btn" style="margin-top: 12px; background: #6b7280">
        Clear All
      </button>

      <h3>Log</h3>
      <div id="log"></div>
    </div>
    <div id="viewer-container"></div>
    <script type="module" src="/src/main.ts"></script>
  </body>
</html>
